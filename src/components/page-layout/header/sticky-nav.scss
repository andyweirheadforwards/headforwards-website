@import "../../../scss/variables";

@mixin sticky-nav {

    @include fontMedium;
    position: relative;
    margin-top: 4em;

    nav {
        @include fontMedium;
        transition: background-color $transitionTime/2 ease;
        position: absolute;
        top: calc(2px - 4em);
        z-index: 1;

        &:global(.is-active) {
            top: 0;
        }
    }

    &.isScrollingUp, &.isScrollingDown {

        > nav:not(:global(.is-active)) {
            transition: transform $transitionTime ease;
            position: fixed;
            left: 0;
            right: 0;
            z-index: 100;
            background-color: white;
        }
        &.isScrollingUp nav:not(:global(.is-active)) {
            transform: translateY(calc(4em - 3px));
        }

        &.isScrollingDown nav:not(:global(.is-active)) {
            transform: translateY(calc(-100% - 8em));
        }
    }

    @media (min-width: $screen-md) {

        margin-top: 4.5em;

        nav {
            top: -4.5em;
        }

        &.isScrollingUp, &.isScrollingDown {

            > nav:not(:global(.is-active)) {
                top: -4.5em;

                &:global(.is-active) {
                    top: -4.5em;
                }

                &:after {
                    transform: translateY(50%);
                    opacity: unset;
                }
            }

            &.isScrollingUp nav:not(:global(.is-active)) {
                transform: translateY(4.5em);
            }

            &.isScrollingDown nav:not(:global(.is-active)) {
                transform: translateY(calc(-100% - 9em));
            }
        }
    }

    @media (min-width: $screen-lg) {

        margin-top: 0;
        padding-top: calc(5em + 2px);

        nav {
            top: 0;

            &:global(.is-active) {
                top: calc(-5em - 2px);
            }
        }

        &.isScrollingUp, &.isScrollingDown {

            > nav:not(:global(.is-active)) {
                top: calc(-5em - 2px);
                background: rgba(white, 0.975);
                &:after {
                    width: 100vw;
                    margin: 0;
                    left: 0;
                    right: 0;
                }

                &:global(.is-active) {
                    top: calc(-5em - 2px);
                }

                > header > a {
                    background-image: url(/images/headforwards.black.png);
                }

                > section > ul > li > a {
                    color: black;
                }
            }

            &.isScrollingUp nav:not(:global(.is-active)) {
                transform: translateY(5em);
            }

            &.isScrollingDown nav:not(:global(.is-active)) {
                transform: translateY(calc(-100% - 10em));
            }
        }
    }

    @media (min-width: $max_width_gutter) {
        > nav {
            top: 0;
            left: 0;
            right: 0;

            max-width: unset;
            padding-left: calc(50vw - #{$max_width/2});
            padding-right: calc(50vw - #{$max_width/2});

            &:after {
                width: $max_width;
            }
        }
    }
}
